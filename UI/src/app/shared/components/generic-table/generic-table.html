<!-- generic-table.html -->
<div class="mr-3 ml-3 min-h-screen bg-gradient-to-br from-[#e8f0ff] to-[#eef3ff] p-6">
  <!-- Topbar -->
  <div class="flex justify-between items-center mb-6">
    <div class="text-xl font-semibold text-gray-800">{{ config.title }}</div>

    <div class="flex items-center gap-4">
      <button
        *ngIf="config.addButton"
        class="px-5 py-2 bg-blue-700 text-white rounded-lg shadow hover:opacity-90"
        (click)="onAddNew()"
      >
        {{ config.addButton.label }}
      </button>
    </div>
  </div>

  <!-- Filters Card -->
  <div *ngIf="config.showFilters" class="bg-white p-6 rounded-2xl shadow-md mb-6">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
      <!-- Search -->
      <div>
        <label class="block text-gray-600 mb-1 text-sm">Buscar</label>
        <input
          class="w-full px-4 py-2 border rounded-xl bg-gray-50 focus:outline-none"
          placeholder="Pesquisar..."
        />
      </div>

      <!-- Filtro 1 -->
      <div>
        <label class="block text-gray-600 mb-1 text-sm">Filtro 1</label>
        <select class="w-full px-4 py-2 border bg-gray-50 rounded-xl text-gray-600">
          <option>Todos</option>
        </select>
      </div>

      <!-- Filtro 2 -->
      <div>
        <label class="block text-gray-600 mb-1 text-sm">Filtro 2</label>
        <select class="w-full px-4 py-2 border bg-gray-50 rounded-xl text-gray-600">
          <option>Todos</option>
        </select>
      </div>

      <!-- Search Button -->
      <div class="flex items-end">
        <button class="w-full bg-blue-700 text-white px-6 py-2 rounded-xl shadow hover:opacity-90">
          PESQUISAR
        </button>
      </div>
    </div>
  </div>

  <!-- Table Card -->
  <div class="bg-white p-6 rounded-2xl shadow-md">
    <!-- Top of Table -->
    <div class="flex justify-between items-center mb-4">
      <div class="font-semibold text-gray-800">{{ config.title }}</div>

      <div *ngIf="config.showBatchActions" class="flex items-center gap-3">
        <select class="px-4 py-2 border bg-gray-50 rounded-xl text-gray-600">
          <option>Todos os campos</option>
        </select>

        <button
          class="px-5 py-2 bg-blue-700 text-white rounded-xl hover:opacity-90"
          (click)="onBatchAction()"
        >
          AÇÃO EM LOTE
        </button>
      </div>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
      <table class="w-full text-left">
        <thead class="text-gray-500 text-sm">
          <tr>
            <th *ngIf="showCheckbox" class="p-3">
              <input type="checkbox" />
            </th>

            <th *ngFor="let col of columns" class="p-3 font-semibold">
              {{ col.header }}
            </th>

            <th *ngIf="actions.length > 0" class="p-3">Ações</th>
          </tr>
        </thead>

        <tbody class="text-gray-700">
          <ng-container *ngIf="data && data.length > 0; else noData">
            <tr
              *ngFor="let row of data"
              class="border-t hover:bg-gray-50 transition cursor-pointer"
              (click)="onRowClick(row)"
            >
              <td *ngIf="showCheckbox" class="p-3">
                <input type="checkbox" />
              </td>

              <td *ngFor="let col of columns" class="p-3" [ngClass]="col.class">
                {{ col.format ? col.format(row[col.field], row) : row[col.field] }}
              </td>

              <td *ngIf="actions.length > 0" class="p-3">
                <div class="flex gap-2">
                  <button
                    *ngFor="let action of actions"
                    (click)="action.onClick(row); $event.stopPropagation()"
                    class="px-3 py-1 rounded-lg text-white text-sm transition-colors"
                    [ngClass]="action.class"
                    [title]="action.label"
                  >
                    {{ action.label }}
                  </button>
                </div>
              </td>
            </tr>
          </ng-container>

          <ng-template #noData>
            <tr>
              <td
                [attr.colspan]="
                  columns.length + (showCheckbox ? 1 : 0) + (actions.length > 0 ? 1 : 0)
                "
                class="p-4 text-center text-gray-500"
              >
                {{ data === null ? 'Carregando...' : 'Nenhum registro encontrado' }}
              </td>
            </tr>
          </ng-template>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div *ngIf="config.showPagination" class="flex justify-end items-center gap-2 mt-4">
      <button class="px-3 py-1 border rounded-lg text-gray-600">1</button>
      <button class="px-3 py-1 bg-blue-700 text-white rounded-lg">2</button>
      <button class="px-3 py-1 border rounded-lg text-gray-600">3</button>
      <span class="text-gray-500">...</span>
      <button class="px-3 py-1 border rounded-lg text-gray-600">10</button>
    </div>
  </div>
</div>
