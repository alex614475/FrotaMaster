<div class="min-h-screen p-4 md:p-6">
  <!-- Header: T√≠tulo + Bot√£o Novo -->
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-semibold">{{ config.title }}</h2>

    <!-- Bot√£o Novo -->
    <button
      *ngIf="config.addButton"
      (click)="onAddNew()"
      class="px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 flex items-center gap-2"
    >
      <span *ngIf="config.addButton.icon" [innerHTML]="config.addButton.icon"></span>
      {{ config.addButton.label }}
    </button>
  </div>

  <!-- Filters Card (DESKTOP) -->
  <div *ngIf="config.showFilters && config.filters" class="hidden md:block">
    <div class="bg-white p-6 rounded-2xl shadow-md mb-6">
      <div class="flex flex-col md:flex-row gap-4 items-end">
        <!-- Filtros Lado Esquerdo -->
        <div class="flex-1 grid grid-cols-1 md:grid-cols-4 gap-4">
          <div *ngFor="let filter of config.filters">
            <label class="block text-gray-600 mb-1 text-sm">{{ filter.label }}</label>

            <!-- Input Text -->
            <input
              *ngIf="filter.type === 'text'"
              type="text"
              [(ngModel)]="filterValues[filter.field]"
              (keyup.enter)="onFilter()"
              [placeholder]="filter.placeholder || 'Pesquisar...'"
              class="w-full px-4 py-2.5 border rounded-xl bg-gray-50 focus:outline-none focus:border-blue-600 h-[42px]"
            />

            <!-- Select -->
            <select
              *ngIf="filter.type === 'select'"
              [(ngModel)]="filterValues[filter.field]"
              class="w-full px-4 py-2.5 border bg-gray-50 rounded-xl text-gray-600 focus:outline-none focus:border-blue-600 h-[42px]"
            >
              <option value="">Todos</option>
              <option *ngFor="let opt of filter.options" [value]="opt.value">
                {{ opt.label }}
              </option>
            </select>

            <!-- Number -->
            <input
              *ngIf="filter.type === 'number'"
              type="number"
              [(ngModel)]="filterValues[filter.field]"
              (keyup.enter)="onFilter()"
              class="w-full px-4 py-2.5 border rounded-xl bg-gray-50 focus:outline-none focus:border-blue-600 h-[42px]"
            />
          </div>
        </div>

        <!-- Bot√µes -->
        <div class="flex gap-2 items-end">
          <button
            class="flex items-center px-5 py-2 gap-2 bg-gray-500 text-white rounded-lg shadow hover:bg-blue-700"
            (click)="onFilter()"
          >
            üîç PESQUISAR
          </button>

          <button
            *ngIf="hasActiveFilters"
            class="flex items-center gap-2 px-4 py-2.5 border border-gray-300 text-gray-600 rounded-xl hover:bg-gray-50 text-sm min-w-[100px] justify-center h-[42px]"
            (click)="onClearFilters()"
          >
            üßπ Limpar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- FILTROS MOBILE (overlay lateral) -->
  <div *ngIf="showFilter" class="fixed inset-0 bg-black/40 md:hidden z-50 flex justify-end">
    <div class="bg-white w-3/4 h-full p-5 shadow-xl animate-slide-left overflow-y-auto">
      <h2 class="text-lg font-semibold text-gray-700 mb-4">Filtros</h2>

      <div class="grid grid-cols-1 gap-4">
        <div *ngFor="let filter of config.filters">
          <label class="block text-gray-600 mb-1 text-sm">{{ filter.label }}</label>

          <!-- Text -->
          <input
            *ngIf="filter.type === 'text'"
            type="text"
            [(ngModel)]="filterValues[filter.field]"
            (keyup.enter)="onFilter(); toggleFilter()"
            class="w-full px-4 py-2 border rounded-xl bg-gray-50"
          />

          <!-- Select -->
          <select
            *ngIf="filter.type === 'select'"
            [(ngModel)]="filterValues[filter.field]"
            class="w-full px-4 py-2 border rounded-xl bg-gray-50"
          >
            <option value="">Todos</option>
            <option *ngFor="let opt of filter.options" [value]="opt.value">
              {{ opt.label }}
            </option>
          </select>

          <!-- Number -->
          <input
            *ngIf="filter.type === 'number'"
            type="number"
            [(ngModel)]="filterValues[filter.field]"
            class="w-full px-4 py-2 border rounded-xl bg-gray-50"
          />
        </div>
      </div>

      <div class="mt-6 flex flex-col gap-3">
        <button
          (click)="onFilter(); toggleFilter()"
          class="w-full px-4 py-2 bg-blue-700 text-white rounded-xl shadow"
        >
          Aplicar Filtros
        </button>

        <button
          *ngIf="hasActiveFilters"
          (click)="onClearFilters()"
          class="w-full px-4 py-2 border border-gray-300 rounded-xl shadow"
        >
          Limpar
        </button>

        <button (click)="toggleFilter()" class="w-full px-4 py-2 bg-gray-200 rounded-xl">
          Fechar
        </button>
      </div>
    </div>
  </div>

  <!-- Bot√£o flutuante (apenas MOBILE) -->
  <button
    *ngIf="config.showFilters && config.filters"
    class="fixed bottom-5 right-5 bg-blue-700 text-white px-5 py-3 rounded-full shadow-xl md:hidden z-50"
    (click)="toggleFilter()"
  >
    üîç Filtros
  </button>

  <!-- Tabela -->
  <div class="overflow-x-auto bg-white shadow-md rounded-xl">
    <table class="min-w-full border-collapse">
      <thead class="bg-gray-100">
        <tr>
          <th *ngIf="showCheckbox" class="p-3 text-left text-gray-600">
            <input type="checkbox" />
          </th>

          <th *ngFor="let col of columns" class="p-3 text-left text-gray-600" [ngClass]="col.class">
            {{ col.header }}
          </th>

          <th *ngIf="actions.length > 0" class="p-3 text-left text-gray-600">A√ß√µes</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let row of displayData" class="hover:bg-gray-50 cursor-pointer border-b">
          <td *ngIf="showCheckbox" class="p-3">
            <input type="checkbox" />
          </td>

          <td *ngFor="let col of columns" class="p-3" (click)="onRowClick(row)">
            {{ col.format ? col.format(row[col.field], row) : row[col.field] }}
          </td>

          <td *ngIf="actions.length > 0" class="p-3 flex gap-2">
            <button
              *ngFor="let action of actions"
              (click)="action.onClick(row)"
              class="px-2 py-1 rounded bg-blue-600 text-white text-xs"
            >
              {{ action.label }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
